================================================================================
                   GUIDE COMPLET: COMPILER & TESTER TFLOW
                           SecurePhone Project - Enma
================================================================================

================================================================================
RÃ‰SUMÃ‰ RAPIDE
================================================================================

Vous avez crÃ©Ã© 10 fichiers Java + 5 fichiers de test + 1 script automatisÃ©.

Pour tester rapidement:
  cd /opt/lampp/htdocs/SecurePhone
  ./test.sh compile    # VÃ©rifie la compilation
  ./test.sh test       # Lance les 35 tests unitaires  
  ./test.sh audio      # Test d'intÃ©gration audio (interactif)
  ./test.sh full       # Tout ensemble

================================================================================
STRUCTURE DU PROJET
================================================================================

SecurePhone/
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ pom.xml                    â† Configuration Maven
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/java/com/securephone/client/
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioBuffer.java         [CRÃ‰Ã‰ - Buffer thread-safe]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioCapture.java        [CRÃ‰Ã‰ - Capture microphone]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioPlayer.java         [CRÃ‰Ã‰ - Lecture audio]
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ OpusCodec.java           [CRÃ‰Ã‰ - Codec (stub)]
â”‚   â”‚   â”‚   â”œâ”€â”€ video/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VideoBuffer.java         [CRÃ‰Ã‰ - Buffer vidÃ©o]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VideoCapture.java        [CRÃ‰Ã‰ - Capture camÃ©ra (stub)]
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPlayer.java         [CRÃ‰Ã‰ - Lecture vidÃ©o (stub)]
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ H264Codec.java           [CRÃ‰Ã‰ - Codec (stub)]
â”‚   â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚   â”‚       â”œâ”€â”€ AudioDevice.java         [CRÃ‰Ã‰ - ModÃ¨le pÃ©riphÃ©rique]
â”‚   â”‚   â”‚       â””â”€â”€ UserSession.java         [CRÃ‰Ã‰ - Ã‰tat utilisateur]
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ test/java/com/securephone/client/
â”‚   â”‚       â”œâ”€â”€ audio/
â”‚   â”‚       â”‚   â”œâ”€â”€ AudioBufferTest.java     [CRÃ‰Ã‰ - 8 tests]
â”‚   â”‚       â”‚   â”œâ”€â”€ OpusCodecTest.java       [CRÃ‰Ã‰ - 9 tests]
â”‚   â”‚       â”‚   â””â”€â”€ AudioIntegrationTest.java[CRÃ‰Ã‰ - Test interactif]
â”‚   â”‚       â””â”€â”€ models/
â”‚   â”‚           â”œâ”€â”€ AudioDeviceTest.java     [CRÃ‰Ã‰ - 8 tests]
â”‚   â”‚           â””â”€â”€ UserSessionTest.java     [CRÃ‰Ã‰ - 10 tests]
â”‚   â”‚
â”‚   â””â”€â”€ target/
â”‚       â”œâ”€â”€ classes/                â† Bytecode compilÃ© (aprÃ¨s mvn compile)
â”‚       â”œâ”€â”€ test-classes/           â† Tests compilÃ©s (aprÃ¨s mvn test)
â”‚       â””â”€â”€ surefire-reports/       â† Rapports tests (aprÃ¨s mvn test)
â”‚
â”œâ”€â”€ test.sh                         [CRÃ‰Ã‰ - Script automatisÃ©]
â”œâ”€â”€ TFLOW_IMPLEMENTATION_LOG.txt    [CRÃ‰Ã‰ - Log dÃ©taillÃ©]
â””â”€â”€ AUDIO_TESTS_README.txt          [CRÃ‰Ã‰ - Guide tests audio]

================================================================================
PRÃ‰REQUIS
================================================================================

âœ“ MINIMUM:
  - Java 11+ (vous avez Java 25)
  - Maven 3.6+ (vous avez Maven)
  - Linux/macOS/Windows avec bash

âœ“ POUR TEST AUDIO (AudioIntegrationTest):
  - Microphone connectÃ©
  - Haut-parleurs/casque connectÃ©
  - Pas d'application utilisant l'audio

VÃ©rifier:
  java -version
  mvn -version

================================================================================
COMPILATION
================================================================================

Ã‰TAPE 1: Compilation simple
---------------------------
cd /opt/lampp/htdocs/SecurePhone/client
mvn clean compile

RÃ©sultat attendu:
  [INFO] BUILD SUCCESS
  Fichiers crÃ©Ã©s: target/classes/com/securephone/client/**/*.class

Ã‰TAPE 2: Via le script
-----------------------
cd /opt/lampp/htdocs/SecurePhone
./test.sh compile

RÃ‰SOLUTION DE PROBLÃˆMES:
- "Maven not found" â†’ installer Maven (apt install maven)
- "Java not found" â†’ installer Java 11+ (apt install openjdk-11-jdk)
- Erreur de compilation â†’ vÃ©rifier la syntaxe dans src/main/java/

================================================================================
TESTS UNITAIRES (35 TESTS)
================================================================================

QU'EST-CE QUI EST TESTÃ‰:
  1. AudioBufferTest (8 tests)
     - Push/poll thread-safe
     - Capacity management
     - Multi-threaded safety
  
  2. OpusCodecTest (9 tests)
     - Encode/decode null handling
     - Empty input handling
     - Round-trip consistency
  
  3. AudioDeviceTest (8 tests)
     - Construction & getters
     - Different configurations (mono/stereo)
     - toString() method
  
  4. UserSessionTest (10 tests)
     - Constructor variants
     - Setters/getters
     - Full lifecycle simulation

LANCER LES TESTS:
------------------
Option 1: Via Maven directement
  cd /opt/lampp/htdocs/SecurePhone/client
  mvn test

Option 2: Via le script
  cd /opt/lampp/htdocs/SecurePhone
  ./test.sh test

Option 3: Test spÃ©cifique seulement
  mvn test -Dtest=AudioBufferTest
  mvn test -Dtest=OpusCodecTest

RÃ‰SULTAT ATTENDU:
------------------
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running com.securephone.client.audio.OpusCodecTest
[INFO] Tests run: 9, Failures: 0, Errors: 0, Skipped: 0
[INFO] Running com.securephone.client.audio.AudioBufferTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0
[INFO] Running com.securephone.client.models.AudioDeviceTest
[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0
[INFO] Running com.securephone.client.models.UserSessionTest
[INFO] Tests run: 10, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] Results:
[INFO] Tests run: 35, Failures: 0, Errors: 0, Skipped: 0
[INFO] BUILD SUCCESS

RÃ©sultats dÃ©taillÃ©s:
  client/target/surefire-reports/
    - TEST-*.xml (rÃ©sultats bruts)
    - *.txt (rÃ©sumÃ©s lisibles)

RÃ‰SOLUTION DE PROBLÃˆMES:
- "JUnit not found" â†’ Maven tÃ©lÃ©charge automatiquement (premiÃ¨re exÃ©cution)
- Test timeout â†’ augmenter timeout dans pom.xml (maven-surefire-plugin)
- Erreur de test â†’ vÃ©rifier target/surefire-reports/ pour logs dÃ©taillÃ©s

================================================================================
TEST D'INTÃ‰GRATION AUDIO
================================================================================

QUOI: Teste votre vraie carte son (microphone + haut-parleurs)
COMMENT: Enregistre 5 secondes d'audio, puis le rejoue

PRÃ‰REQUIS:
  âœ“ Microphone connectÃ© et actif
  âœ“ Haut-parleurs/casque connectÃ©
  âœ“ Pas de VLC/Spotify/autre app utilisant l'audio
  âœ“ SystÃ¨me de son fonctionnel

LANCER LE TEST:
----------------
Option 1: Via le script
  cd /opt/lampp/htdocs/SecurePhone
  ./test.sh audio

Option 2: Directement avec Maven
  cd /opt/lampp/htdocs/SecurePhone/client
  mvn exec:java -Dexec.mainClass="com.securephone.client.audio.AudioIntegrationTest"

Option 3: Compiler et exÃ©cuter manuellement
  cd /opt/lampp/htdocs/SecurePhone/client
  mvn clean compile
  mvn exec:java -Dexec.mainClass="com.securephone.client.audio.AudioIntegrationTest"

SCÃ‰NARIO:
---------
1. Programme affiche les instructions
2. Appuyez sur ENTRÃ‰E
3. Voyez: "ğŸ¤ RECORDING... (5 seconds)"
4. PARLEZ CLAIREMENT dans votre microphone
5. Attendez 5 secondes (le programme arrÃªte)
6. Voyez: "ğŸ”Š PLAYBACK..."
7. Vous entendez votre voix en replay
8. Voyez: "âœ“ Playback completed."

RÃ‰SULTAT ATTENDU:
------------------
=====================================
   AUDIO INTEGRATION TEST
=====================================

TEST 1: AudioBuffer push/poll
------------------------------
Pushed 3 frames. Buffer size: 3
Polled frame: [1, 2, 3]. Buffer size: 2
Cleared buffer. Size: 0
âœ“ AudioBuffer test passed.

TEST 2: Audio Capture and Playback
-----------------------------------

Microphone test:
1. Press ENTER to start recording
2. Speak clearly into your microphone
3. Wait 5 seconds, then recording stops automatically

Press ENTER to begin: [USER APPUIE ENTRÃ‰E]

ğŸ¤ RECORDING... (5 seconds)
â¹ï¸  Recording stopped.
Buffer contains 48 frames.

ğŸ”Š PLAYBACK...
[VOUS ENTENDEZ VOTRE VOIX]
âœ“ Playback completed.

âœ“ All tests completed.

DÃ‰PANNAGE:
-----------
Erreur: "LineUnavailableException"
  â†’ Pas de carte son dÃ©tectÃ©e
  â†’ VÃ©rifier: SystÃ¨me â†’ Son â†’ EntrÃ©e/Sortie
  â†’ Relancer aprÃ¨s connexion pÃ©riphÃ©riques

Erreur: "Exception in thread "AudioCapture-Thread""
  â†’ Microphone non accessible
  â†’ VÃ©rifier permissions (sudo si Linux)
  â†’ VÃ©rifier app n'utilise pas le microphone

Audio dÃ©formÃ©:
  â†’ Trop fort: Baisser volume microphone systÃ¨me
  â†’ CoupÃ©: Augmenter AudioBuffer capacity (ligne 11 dans test)

Pas d'audio du tout:
  â†’ VÃ©rifier haut-parleurs branchÃ©s
  â†’ VÃ©rifier volume systÃ¨me non muet
  â†’ VÃ©rifier pas d'autre app utilisant l'audio

================================================================================
SCRIPT AUTOMATISÃ‰ (test.sh)
================================================================================

UTILISATION:
  ./test.sh [compile|test|audio|full]

OPTIONS:
  compile  - Compile le code source uniquement (~3s)
  test     - Lance les 35 tests unitaires (~2s)
  audio    - Test d'intÃ©gration audio interactif (~15s)
  full     - Tout ensemble compile + test + audio (~20s)

EXEMPLES:
  ./test.sh compile       # VÃ©rifier que Ã§a compile
  ./test.sh test          # Lancer les tests automatisÃ©s
  ./test.sh audio         # Tester votre microphone
  ./test.sh full          # Complet (idÃ©al avant commit)

FEATURES:
  âœ“ Couleurs (vert/rouge/bleu/jaune)
  âœ“ Logs dans /tmp/securephone_build.log
  âœ“ VÃ©rification Maven installÃ©
  âœ“ Gestion d'erreurs
  âœ“ RÃ©sumÃ© final

================================================================================
WORKFLOW RECOMMANDÃ‰
================================================================================

JOUR 1: VÃ©rification environnement
  1. ./test.sh compile        # VÃ©rifier compilation OK
  2. ./test.sh test           # Lancer 35 tests OK
  3. ./test.sh audio          # Tester carte son OK

JOUR 2: Avant commit
  ./test.sh full              # Tout ensemble avant push

JOUR 3+: Development itÃ©ratif
  a. Modifier code source
  b. ./test.sh test           # VÃ©rifier pas de rÃ©gression
  c. Commit si tous tests passent

AVANT PRODUCTION:
  1. ./test.sh full           # SuccÃ¨s
  2. Coordonner avec Hailey (protocole)
  3. ImplÃ©menter AudioClient/VideoClient
  4. Tests d'intÃ©gration rÃ©seau (avec sockets)

================================================================================
FICHIERS CRÃ‰Ã‰S POUR TFLOW
================================================================================

SOURCES (10 fichiers):
  âœ“ client/src/main/java/com/securephone/client/audio/
    - AudioBuffer.java (thread-safe queue)
    - AudioCapture.java (microphone input)
    - AudioPlayer.java (speaker output)
    - OpusCodec.java (codec stub)
  
  âœ“ client/src/main/java/com/securephone/client/video/
    - VideoBuffer.java (thread-safe queue)
    - VideoCapture.java (camera input - stub)
    - VideoPlayer.java (display output - stub)
    - H264Codec.java (codec stub)
  
  âœ“ client/src/main/java/com/securephone/client/models/
    - AudioDevice.java (device model)
    - UserSession.java (session state)

TESTS (5 fichiers):
  âœ“ client/src/test/java/com/securephone/client/audio/
    - AudioBufferTest.java (8 tests)
    - OpusCodecTest.java (9 tests)
    - AudioIntegrationTest.java (interactive test)
  
  âœ“ client/src/test/java/com/securephone/client/models/
    - AudioDeviceTest.java (8 tests)
    - UserSessionTest.java (10 tests)

CONFIGURATION (1 fichier):
  âœ“ client/pom.xml (Maven config + maven-exec-plugin)

SCRIPT (1 fichier):
  âœ“ test.sh (Automatisation compile/test/audio)

DOCUMENTATION (2 fichiers):
  âœ“ TFLOW_IMPLEMENTATION_LOG.txt (Log dÃ©taillÃ©)
  âœ“ AUDIO_TESTS_README.txt (Guide tests audio)
  âœ“ COMPILATION_TEST_GUIDE.txt (ce fichier)

TOTAL: 22 fichiers crÃ©Ã©s pour Tflow

================================================================================
PROCHAINES Ã‰TAPES
================================================================================

COURT TERME (dÃ©pend Hailey):
  1. Attendre dÃ©finition AudioPacket/VideoPacket (protocole)
  2. CrÃ©er AudioClient (UDP socket + OpusCodec)
  3. CrÃ©er VideoClient (UDP socket + H264Codec)
  4. Tests intÃ©gration rÃ©seau (simuler serveur)

MOYEN TERME (dÃ©pend Hatsu):
  1. Coordination UI pour PTTButton
  2. IntÃ©gration AudioPlayer avec affichage
  3. Affichage qualitÃ© rÃ©seau

LONG TERME:
  1. Remplacer OpusCodec stub par real Opus
  2. Remplacer H264Codec stub par real H264
  3. Optimisation latence rÃ©seau
  4. Tests multi-utilisateurs

================================================================================
CONTACT & SUPPORT
================================================================================

Questions sur la compilation:
  - VÃ©rifier Maven: mvn -version
  - VÃ©rifier Java: java -version
  - Logs: /tmp/securephone_build.log

Questions sur les tests:
  - Rapports: client/target/surefire-reports/
  - Source: client/src/test/java/

Questions sur l'audio:
  - VÃ©rifier pÃ©riphÃ©riques: `arecord -l` (Linux)
  - VÃ©rifier volume: `alsamixer` (Linux)
  - Documentation: AUDIO_TESTS_README.txt

================================================================================
FIN DU GUIDE
================================================================================
